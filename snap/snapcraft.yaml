name: batufo
version: git
summary: UFO multi-player
description: |
  UFO multi-player game using Flutter.

  Set against a beautiful universe backdrop it allows players from all over
  the world to compete against each other in realtime.

confinement: strict
base: core18
grade: stable
apps:
  batufo:
    command: bin/client
    extensions: [gnome-3-28]
    plugs:
      - x11
      - opengl
      - network

parts:
  batufo:
    source: .
    plugin: nil
    override-build: |
      set -eux
      snapcraftctl build
      cd client
      flutter channel master
      flutter config --enable-linux-desktop
      flutter pub get
      flutter build linux --release -t lib/main/desktop.release.dart
      mkdir -p $SNAPCRAFT_PART_INSTALL/bin
      cp -r build/linux/release/bundle/* $SNAPCRAFT_PART_INSTALL/bin/
    build-snaps:
      - flutter/latest/edge
